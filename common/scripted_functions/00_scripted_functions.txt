# Hard-coded functions made fully or partly scripted
#
# Note that most functions use unique mechanics

# ROOT = country
can_join_hre_league = {
	condition = {
		tooltip = "CANNOT_JOIN_LEAGUE_AT_WAR"
		potential = {
		}
		allow = {
			is_at_war = no
		}
	}
}

can_leave_hre_league = {
}

can_harsh_treatment = {
}

can_reduce_war_exhaustion = {
}

can_reduce_inflation = {
}

can_declare_bankruptcy = {
}

can_release_colonial_nation = {
	condition = {
		tooltip = "CAN_RELEASE_CN_WE_ARE_AT_WAR"
		potential = {
		}
		allow = {
			is_at_war = no
		}
	}
}

can_claim_defender_of_faith = {
}

can_change_national_focus = {
}

can_increase_stability = {
}

# ROOT = province, FROM = country
can_add_province_to_hre = {
	
}

#ROOT = province, FROM = country
can_remove_province_from_hre = {
	condition = {
		potential = {
			owner = {
				ai = yes
			}
		}
		allow = {
			owner = {
				NOT = {
					has_country_flag = permanently_left_hre_flag
				}
			}
		}
	}
}

can_increase_autonomy = {
}

can_decrease_autonomy = {
}

can_make_core = {
}

can_make_state = {
	condition = {
		tooltip = "NO_OVERSEAS_STATE"
		potential = {
			ROOT = {
				is_overseas = yes
			}
		}
		allow = {
			always = no
		}
	}
}

can_abandon_state = {
}

can_improve_tax = {
}

can_improve_production = {
}

can_improve_manpower = {
}

can_exploit_tax = {
}

can_exploit_production = {
}

can_exploit_manpower = {
}

can_change_culture = {
}

can_move_capital = {
	condition = {
		tooltip = "NO_CAPITAL_MOVE_SHOGUN"
		potential = {
			FROM = {
				has_reform = shogunate
			}
		}
		allow = {
			always = no
		}
	}
}

can_move_trade_port = {
}

can_order_assault = {
}

can_order_force_march = {
}

can_scorch_earth = {
}

can_garrison_sorties = {
}

can_seize_colony = {
}

can_burn_colony = {
}

can_colonize_province = {
	condition = {
		tooltip = "iberia_colonise_restriction"
		potential = { 
			NOT = { is_year = 1650 }
			FROM = {
				ai = yes
				capital_scope = {
					region = iberia_region
				}
			}
		}
		allow = { 
			NOT = { 
				OR = {
					colonial_region = colonial_canada
					colonial_region = colonial_eastern_america 
					colonial_region = colonial_louisiana
					colonial_region = colonial_alaska  
				}
			}
		}
	}
	condition = {
		tooltip = "not_iberia_colonise_restriction"
		potential = { 
			NOT = { is_year = 1650 }
			FROM = {
				ai = yes
				capital_scope = {
					continent = europe
					NOT = { region = iberia_region }
				}
			}
		}
		allow = { 
			NOT = { 
				OR = {
					colonial_region = colonial_mexico
					colonial_region = colonial_brazil
					colonial_region = colonial_la_plata 
					colonial_region = colonial_peru 
				}
			}
		}
	}
	condition = {
		tooltip = "colonial_region_restriction"
		potential = {
			FROM = {
				is_colonial_nation = yes
			}
		}
		allow = {
			FROM = {
				capital_scope = {
					colonial_region = ROOT
				}
			}
		}
	}
	condition = {
		tooltip = "subject_colonial_region_restriction"
		potential = {
			FROM = {
				is_subject = yes
				is_colonial_nation = no
			}
		}
		allow = {
			NOT = {
				FROM = {
					overlord = {
						any_subject_country = {
							is_colonial_nation = yes
							capital_scope = {
								colonial_region = ROOT
							}
						}
					}
				}
			}
		}
	}
	condition = {
		tooltip = "limit_colonize_interior"
		potential = {
			FROM = {
				NOT = {
					OR = {
						is_colonial_nation = yes
						is_former_colonial_nation = yes
						AND = {
							capital_scope = {
								continent = europe
							}
							OR = {
								expansion_ideas = 1 
								has_idea = siberian_frontier
							}
						}
					}
				}
			}
		}
		allow = {
			ROOT = {
				has_port = yes
			}
		}
	}
	condition = {
		tooltip = "limit_colonize_border_province"
		potential = {
			FROM = {
				has_idea = siberian_frontier
				NOT = { has_country_modifier = rus_new_world_colonization }
			}
		}
		allow = {
			ROOT = {
				is_in_capital_area = yes
			}
		}
	}
	condition = {
		tooltip = "limit_colonize_alaska"
		potential = {
			FROM = {
				has_country_modifier = rus_new_world_colonization
			}
		}
		allow = {
			ROOT = {
				OR = {	
					colonial_region = colonial_alaska
					is_in_capital_area = yes
				}
			}
		}
	}
	# alca√ßovas treaty
	condition = {
		tooltip = "alcacovas_treaty"
		potential = {
			FROM = {
				has_country_flag = alcacovas_treaty
				NOT = { has_country_flag = tordesillas_cas }
				NOT = { has_country_flag = terra_nova_cas }
				NOT = { has_country_flag = new_tordesillas_cas }
			}
		}
		allow = {
			ROOT = {
				NOT = {
					OR = {
						continent = africa
						continent = south_america
					}
				}
			}
		}
	}
	# tordesillas portugal
	condition = {
		tooltip = "tordesillas_portugal"
		potential = {
			FROM = {
				has_country_flag = tordesillas_por
				NOT = { has_country_flag = terra_nova_por }
				NOT = { has_country_flag = new_tordesillas_por }
			}
		}
		allow = {
			ROOT = {
				NOT = {
					OR = {
						continent = north_america
						AND = {
							continent = south_america
							NOT = {
								OR = {
									area = maranhao_area
									area = piaui_area
									area = ceara_area
									area = sao_francisco_area
									area = pernambuco_area
									area = bahia_area
									area = diamantina_area
									area = minas_gerais_area
									area = rio_de_janeiro_area
									area = grao_para_area
									area = pontal_area
									area = goias_area
									area = sao_paolo_area
								}
							}
						}
					}
				}
			}
		}
	}
	# terra nova portugal
	condition = {
		tooltip = "tordesillas_portugal"
		potential = {
			FROM = {
				has_country_flag = terra_nova_por
				NOT = { has_country_flag = tordesillas_por }
				NOT = { has_country_flag = new_tordesillas_por }
			}
		}
		allow = {
			ROOT = {
				NOT = {
					OR = {
						AND = {
							continent = north_america
							NOT = { 
								OR = {
									area = newfoundland_area
									area = labrador_area
								}
							}
						}
						AND = {
							continent = south_america
							NOT = {
								OR = {
									area = maranhao_area
									area = piaui_area
									area = ceara_area
									area = sao_francisco_area
									area = pernambuco_area
									area = bahia_area
									area = diamantina_area
									area = minas_gerais_area
									area = rio_de_janeiro_area
									area = grao_para_area
									area = pontal_area
									area = goias_area
									area = sao_paolo_area
								}
							}
						}
					}
				}
			}
		}
	}
	# new tordesillas portugal
	condition = {
		tooltip = "tordesillas_portugal"
		potential = {
			FROM = {
				has_country_flag = new_tordesillas_por
				NOT = { has_country_flag = terra_nova_por }
				NOT = { has_country_flag = tordesillas_por }
			}
		}
		allow = {
			ROOT = {
				NOT = {
					OR = {
						AND = {
							continent = north_america
							NOT = { 
								OR = {
									area = newfoundland_area
									area = labrador_area
								}
							}
						}
						AND = {
							continent = south_america
							NOT = {
								region = brazil_region
							}
						}
						area = luzon_area
						area = southern_luzon_area
						area = visayas_area
						area = mindanao_area
						area = west_mindanao_area
						area = palawan_area
					}
				}
			}
		}
	}
	# tordesillas castile
	condition = {
		tooltip = "tordesillas_castile"
		potential = {
			FROM = {
				has_country_flag = tordesillas_cas
				NOT = { has_country_flag = alcacovas_treaty }
				NOT = { has_country_flag = terra_nova_cas }
				NOT = { has_country_flag = new_tordesillas_cas }
			}
		}
		allow = {
			ROOT = {
				NOT = {
					OR = {
						continent = africa
						continent = asia
						area = maranhao_area
						area = piaui_area
						area = ceara_area
						area = sao_francisco_area
						area = pernambuco_area
						area = bahia_area
						area = diamantina_area
						area = minas_gerais_area
						area = rio_de_janeiro_area
						area = grao_para_area
						area = pontal_area
						area = goias_area
						area = sao_paolo_area
					}
				}
			}
		}
	}
	# terra nova castile
	condition = {
		tooltip = "tordesillas_castile"
		potential = {
			FROM = {
				has_country_flag = terra_nova_cas
				NOT = { has_country_flag = alcacovas_treaty }
				NOT = { has_country_flag = tordesillas_cas }
				NOT = { has_country_flag = new_tordesillas_cas }
			}
		}
		allow = {
			ROOT = {
				NOT = {
					OR = {
						continent = africa
						continent = asia
						area = maranhao_area
						area = piaui_area
						area = ceara_area
						area = sao_francisco_area
						area = pernambuco_area
						area = bahia_area
						area = diamantina_area
						area = minas_gerais_area
						area = rio_de_janeiro_area
						area = grao_para_area
						area = pontal_area
						area = goias_area
						area = sao_paolo_area
						area = newfoundland_area
						area = labrador_area
					}
				}
			}
		}
	}
	# new tordesillas castile
	condition = {
		tooltip = "tordesillas_castile"
		potential = {
			FROM = {
				has_country_flag = new_tordesillas_cas
				NOT = { has_country_flag = alcacovas_treaty }
				NOT = { has_country_flag = terra_nova_cas }
				NOT = { has_country_flag = tordesillas_cas }
			}
		}
		allow = {
			ROOT = {
				NOT = {
					OR = {
						continent = africa
						AND = {
							continent = asia
							NOT = {
								OR = {
									area = luzon_area
									area = southern_luzon_area
									area = visayas_area
									area = mindanao_area
									area = west_mindanao_area
									area = palawan_area
								}
							}
						}
						region = brazil_region
						area = newfoundland_area
						area = labrador_area
					}
				}
			}
		}
	}
	# patroonschap system
	condition = {
		tooltip = "patroonschap_system"
		potential = {
			FROM = {
				has_country_flag = patroonschap_system
			}
		}
		allow = {
			ROOT = {
				NOT = {
					AND = {
						colonial_region = colonial_eastern_america
						NOT = {
							OR = {
								province_id = 965
								province_id = 957
								province_id = 968
								province_id = 950
								province_id = 932
							}
						}
					}
				}
			}
		}
	}
}

can_colonize_province_siberian_frontier = {
}

can_add_seat_in_parliament = {
}

can_remove_seat_in_parliament = {
}

can_add_estate = {
}

can_expel_minority_from = {
	condition = {
		potential = {
			OR = {
				is_religious_center_province = yes
				is_reformation_center = yes
			}
		}
		allow = {
			always = no
		}
	}
}

#hardcoded: has a colonial parent or is in the same colonial region as the capital
can_have_colonial_nations = {
	condition = {
		potential = {
			FROM = {
				has_country_flag = no_colonial_nations
			}
		}
		allow = {
			always = no 
		}
	}
}

### Special functions

# Called by can_add_province_to_hre
is_possible_hre_province = {
	condition = {
		tooltip = "APH_ONLY_EUROPE"
		potential = {
		}
		allow = {
			continent = europe
		}
	}
}

will_demand_annexation = {
	condition = {
		potential = {
			is_elector = yes
		}
		allow = {
			NOT = { hre_reform_passed = landfriede }
		}
	}
}

can_join_hre = {
	condition = {
		tooltip = "PERMANENTLY_LEFT_HRE"
		potential = {
		}
		allow = {
			NOT = {
				has_country_flag = permanently_left_hre_flag
			}
		}
	}
}

can_leave_hre = {
}