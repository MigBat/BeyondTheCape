namespace = btc_gra
normal_or_historical_nations = yes

# Pay the Paria
country_event = {
	id = btc_gra.1
	title = btc_gra.1_t
	desc = btc_gra.1_d
	picture = DEBATE_REPUBLICAN_eventPicture

	fire_only_once = yes

	trigger = {
		tag = GRA
		is_subject_of = CAS
		is_subject_of_type = tributary_state
		is_year = 1482
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		CAS = { set_country_flag = paria_event_happened }
	}

	option = {
		name = btc_gra.1a

		ai_chance = {
			factor = 90
		}

		add_country_modifier = {
			name = subject_of_castile
			duration = 7300
		}
		CAS = { 
			country_event = { 
				id = btc_gra.2 
				days = 1
			}
		}
	}

	option = {
		name = btc_gra.1b

		ai_chance = {
			factor = 10
		}

		CAS = { 
			country_event = { 
				id = btc_gra.3 
				days = 1
			}
		}
	}
}

# Paria Paid
country_event = {
	id = btc_gra.2
	title = btc_gra.2_t
	desc = btc_gra.2_d
	picture = CORRUPTION_eventPicture

	is_triggered_only = yes

	option = {
		name = btc_gra.2a

		add_opinion = {
			who = GRA
			modifier = paria_paid	# +100
		}
	}
}

# Paria Not Paid
country_event = {
	id = btc_gra.3
	title = btc_gra.3_t
	desc = btc_gra.3_d
	picture = BANKRUPCY_eventPicture

	is_triggered_only = yes

	option = {
		name = btc_gra.3a

		ai_chance = {
			factor = 1
		}

		every_province = {
			limit = {
				owned_by = GRA
			}
			add_permanent_claim = ROOT
		}
		add_country_modifier = {
			name = finish_reconquista
			duration = 1825
		}
		if = {
			limit = { 
				ai = yes
			}
			declare_war_with_cb = {
				casus_belli = cb_annex
				who = GRA
			}
		}
	}

	option = {
		name = btc_gra.3b

		ai_chance = {
			factor = 0
		}

		add_prestige = -10
	}
}

# Granada no longer pays tribute
country_event = {
	id = btc_gra.4
	title = btc_gra.4_t
	desc = btc_gra.4_d
	picture = BANKRUPCY_eventPicture

	trigger = {
		tag = CAS
		NOT = { has_country_flag = paria_event_happened }
		GRA = {
			NOT = { is_subject_of = ROOT }
		}
	}

	mean_time_to_happen = {
		days = 1
	}

	option = {
		name = btc_gra.4a

		ai_chance = {
			factor = 1
		}

		every_province = {
			limit = {
				owned_by = GRA
			}
			add_permanent_claim = ROOT
		}
		add_country_modifier = {
			name = finish_reconquista
			duration = 1825
		}
		if = {
			limit = { 
				ai = yes
			}
			declare_war_with_cb = {
				casus_belli = cb_annex
				who = GRA
			}
		}
	}

	option = {
		name = btc_gra.4b

		ai_chance = {
			factor = 0
		}

		add_prestige = -10
	}
}